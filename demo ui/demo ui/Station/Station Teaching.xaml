<UserControl x:Class="WpfDemoApp.Station.Station_Teaching"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="1000"
             Background="#F0F0F0">

    <!--  Resources -->
    <UserControl.Resources>

        <!-- Left Menu Buttons -->
        <Style x:Key="SideButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#CFE8FF"/>
            <Setter Property="BorderBrush" Value="#3A6EA5"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
            <Setter Property="Height" Value="38"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#0B2C4A"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>

        <!-- Point Buttons -->
        <Style x:Key="PointButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="55"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Background" Value="#DFF3FF"/>
            <Setter Property="BorderBrush" Value="#4B89C8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#002244"/>
        </Style>

        <!-- Position TextBoxes -->
        <Style x:Key="DataTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="25"/>
            <Setter Property="BorderBrush" Value="#7E7E7E"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
            <Setter Property="TextAlignment" Value="Right"/>
            <Setter Property="Background" Value="#C7E5FF"/>
        </Style>

        <!-- Setting TextBoxes -->
        <Style x:Key="SettingTextBoxStyle" TargetType="TextBox">
            <Setter Property="Height" Value="26"/>
            <Setter Property="Width" Value="50"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="BorderBrush" Value="#7A7A7A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Background" Value="#E5F3FF"/>
        </Style>

    </UserControl.Resources>


    <!-- MAIN ROOT: UserControl MUST have ONE direct child -->
    <Grid Margin="6">
        <Grid.RowDefinitions>
            <RowDefinition Height="40"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal">
            <Button Content="Manual" Width="100" Height="30" Background="#DDDDDD" BorderBrush="#888"/>
            <Button Content="Station" Width="100" Height="30" Background="#B6FF7A" BorderBrush="#008000" FontWeight="Bold"/>
            <Button Content="X" Width="40" Height="30" Background="#B6FF7A" BorderBrush="#008000" FontWeight="Bold"/>
            <Button Content="←" Width="35" Height="30" Background="#D0FFD0" Margin="10,0,0,0"/>
            <Button Content="→" Width="35" Height="30" Background="#D0FFD0"/>
            <Button Content="X" Width="35" Height="30" Background="#FF7A7A" Foreground="White" FontWeight="Bold" Click="CloseTab_Click"/>
        </StackPanel>


        <!-- MAIN CONTENT -->
        <Border x:Name="MainContentBorder"
                Grid.Row="1"
                Background="White"
                BorderBrush="#999"
                BorderThickness="1"
                Margin="0,2,0,0">

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="250"/>
                </Grid.ColumnDefinitions>


                <!-- LEFT MENU -->
                <StackPanel Grid.Column="0" Margin="5">
                    <Button Content="Cassette"  Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Stage"     Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Drive"     Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Num.Value" Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Auto Reg." Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Save"      Click="SaveButton_Click" Style="{StaticResource SideButtonStyle}" Background="#FFF7A3"/>
                    <Button Content="Test"      Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Sensor"    Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                    <Button Content="Calibrate" Click="MenuButton_Click" Style="{StaticResource SideButtonStyle}"/>
                </StackPanel>


                <!-- CENTER PANEL -->
                <StackPanel Grid.Column="1" Margin="5">

                    <!-- Top input line -->
                    <Border Background="#F4F4F4" BorderBrush="#999" BorderThickness="1" Padding="5" Margin="0,0,0,6">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Group :" FontWeight="Bold" Margin="4,0"/>
                            <TextBox Text="1" Style="{StaticResource SettingTextBoxStyle}" Margin="0,0,15,0"/>

                            <TextBlock Text="Cassette No. :" FontWeight="Bold" Margin="4,0"/>
                            <TextBox Text="1" Style="{StaticResource SettingTextBoxStyle}" Margin="0,0,15,0"/>

                            <TextBlock Text="Arm :" FontWeight="Bold" Margin="4,0"/>
                            <Button Content="A" Width="40" Background="#CCFFCC"/>
                            <Button Content="B" Width="40" Margin="5,0,0,0"/>
                        </StackPanel>
                    </Border>


                    <!-- ERROR BOX -->
                    <Border Background="#EEE" BorderBrush="#666" BorderThickness="1" Height="90" Padding="5" Margin="0,0,0,6">
                        <StackPanel>
                            <TextBlock x:Name="AlarmTitle"
                                       Text="Error Type : [E001] Z Soft Limit Over"
                                       FontWeight="Bold"/>

                            <TextBlock x:Name="AlarmDesc"
                                       Text="Description : The taught Z position exceeds the allowable range."
                                       TextWrapping="Wrap"
                                       Margin="0,4,0,0"/>
                        </StackPanel>
                    </Border>


                    <!-- CANVAS -->
                    <Border BorderBrush="#DDD" BorderThickness="1">
                        <Canvas Height="260" Background="#F5F5F5">

                            <Rectangle Canvas.Left="180" Canvas.Top="40" Width="280" Height="6" Fill="#C5FF6A"/>
                            <Rectangle Canvas.Left="180" Canvas.Top="120" Width="250" Height="6" Fill="#C5FF6A"/>

                            <Button Content="P7" Canvas.Left="20" Canvas.Top="55"  Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>
                            <Button Content="P6" Canvas.Left="90" Canvas.Top="55"  Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>
                            <Button Content="P5" Canvas.Left="300" Canvas.Top="55" Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>

                            <Button Content="P4" Canvas.Left="300" Canvas.Top="135" Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>

                            <Button Content="P1" Canvas.Left="20"  Canvas.Top="200" Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>
                            <Button Content="P2" Canvas.Left="90"  Canvas.Top="200" Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>
                            <Button Content="P3" Canvas.Left="300" Canvas.Top="200" Style="{StaticResource PointButtonStyle}" Click="PointButton_Click"/>

                        </Canvas>
                    </Border>


                    <!-- SLOT SETTINGS -->
                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="Slot Count"/>
                            <TextBox Text="20" Width="80" Style="{StaticResource SettingTextBoxStyle}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="Slot Pitch 1"/>
                            <TextBox Text="20" Width="80" Style="{StaticResource SettingTextBoxStyle}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Slot Pitch 2"/>
                            <TextBox Text="30" Width="80" Style="{StaticResource SettingTextBoxStyle}"/>
                        </StackPanel>
                    </StackPanel>

                </StackPanel>


                <!-- RIGHT PANEL -->
                <StackPanel Grid.Column="2" Margin="10,5,5,5">

                    <TextBlock Text="Position : P1" FontWeight="Bold" Margin="0,0,0,10"/>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                            <RowDefinition Height="35"/>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Text="A" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox x:Name="TbR" Grid.Row="0" Grid.Column="1" Text="123456.123" Style="{StaticResource DataTextBoxStyle}"/>

                        <TextBlock Text="θ" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox x:Name="TbZ" Grid.Row="1" Grid.Column="1" Text="000000.000" Style="{StaticResource DataTextBoxStyle}"/>

                        <TextBlock Text="Z" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox x:Name="TbT" Grid.Row="2" Grid.Column="1" Text="000000.000" Style="{StaticResource DataTextBoxStyle}"/>

                        <TextBlock Text="Y" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox x:Name="Tbr" Grid.Row="3" Grid.Column="1" Text="000000.000" Style="{StaticResource DataTextBoxStyle}"/>

                        <TextBlock Text="Φ" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Grid.Row="4" Grid.Column="1" Text="000000.000" Style="{StaticResource DataTextBoxStyle}"/>
                    </Grid>


                    <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                        <TextBlock Text="Speed" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBox Text="00" Width="50" Style="{StaticResource DataTextBoxStyle}"/>
                        <TextBlock Text="m/s" VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </StackPanel>

                </StackPanel>


                <!-- SAVE POPUP (NOW INSIDE GRID → VALID!) -->
                <Popup x:Name="SavePopup"
                       Placement="Center"
                       StaysOpen="False"
                       AllowsTransparency="True">

                    <Border Background="White"
                            BorderBrush="#0277BD"
                            BorderThickness="2"
                            CornerRadius="8"
                            Width="300" Height="150">

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="40"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="50"/>
                            </Grid.RowDefinitions>

                            <Border Grid.Row="0"
                                    Background="#0277BD"
                                    CornerRadius="6,6,0,0">
                                <TextBlock Text="CONFIRM SAVE"
                                           Foreground="White"
                                           FontWeight="Bold"
                                           VerticalAlignment="Center"
                                           Margin="15,0"/>
                            </Border>

                            <TextBlock Grid.Row="1"
                                       Text="Do you want to save current data?"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       FontSize="15"/>

                            <StackPanel Grid.Row="2"
                                        Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Margin="0,0,10,10">
                                <Button Content="Yes" Width="80" Margin="5" Click="PopupClose_Click"/>
                                <Button Content="No" Width="80" Margin="5" Click="PopupClose_Click"/>
                            </StackPanel>
                        </Grid>

                    </Border>
                </Popup>


            </Grid>
        </Border>


        <!-- TAB CLOSED MESSAGE -->
        <TextBlock x:Name="EmptyMessage"
                   Grid.Row="1"
                   Text="Station Tab Closed"
                   Visibility="Collapsed"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   FontSize="24"
                   Foreground="#BDBDBD"/>

    </Grid>

</UserControl>